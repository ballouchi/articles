define("discourse/plugins/discourse-question-answer/discourse/components/qa-topic-tip",["exports","discourse/lib/text"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=Ember.Component.extend({classNames:["qa-topic-tip"],didInsertElement:function(){var e=this;this._super.apply(this,arguments),$(document).on("click",Ember.run.bind(this,this.documentClick));var o=I18n.t(this.details,this.detailsOpts);o&&(0,t.cookAsync)(o).then(function(t){e.set("cookedDetails",t)})},willDestroyElement:function(){$(document).off("click",Ember.run.bind(this,this.documentClick))},documentClick:function(e){var t=$(this.element);$(e.target).closest(t).length<1&&"destroying"!==this._state&&this.set("showDetails",!1)},actions:{toggleDetails:function(){this.toggleProperty("showDetails")}}});e["default"]=o}),define("discourse/plugins/discourse-question-answer/discourse/components/user-vote-count",["exports","@ember/component"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=t["default"].extend({classNames:["user-vote-count"]});e["default"]=o}),Ember.TEMPLATES["javascripts/discourse/connectors/after-topic-footer-main-buttons/answer-button-wrapper"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["showCreateAnswer"]]],null,{"statements":[[0,"  "],[1,[28,"d-button",null,[["class","icon","action","label","title"],["btn-primary create answer","reply","answerQuestion",[24,["label"]],[24,["title"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/after-topic-footer-main-buttons/answer-button-wrapper"}}),define("discourse/plugins/discourse-question-answer/discourse/connectors/after-topic-footer-main-buttons/answer-button-wrapper",["exports","discourse-common/lib/get-owner"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o={setupComponent:function(e,t){var o,n,s=t.get("currentUser"),i=e.topic,a=i.category&&i.category.qa_one_to_many,r=i.qa_enabled,c=i.get("details.can_create_post"),l=r&&c&&(!a||i.user_id==s.id);if(l){var u=a?"one_to_many":"answer";o="topic.".concat(u,".title"),n="topic.".concat(u,".help")}t.setProperties({showCreateAnswer:l,label:o,title:n})},actions:{answerQuestion:function(){(0,t.getOwner)(this).lookup("controller:topic").send("replyToPost")}}};e["default"]=o}),Ember.TEMPLATES["javascripts/discourse/connectors/category-custom-settings/enable-qa"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"section",true],[8],[0,"\\n  "],[7,"h3",true],[8],[0," "],[1,[28,"i18n",["category.qa_settings_label"],null],false],[9],[0,"\\n\\n  "],[7,"section",true],[10,"class","field"],[8],[0,"\\n    "],[7,"label",true],[8],[0,"\\n      "],[1,[28,"input",null,[["type","checked"],["checkbox",[24,["category","custom_fields","qa_enabled"]]]]],false],[0,"\\n\\n      "],[1,[28,"i18n",["category.enable_qa"],null],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n\\n  "],[7,"section",true],[10,"class","field"],[8],[0,"\\n    "],[7,"label",true],[8],[0,"\\n      "],[1,[28,"input",null,[["type","checked"],["checkbox",[24,["category","custom_fields","qa_one_to_many"]]]]],false],[0,"\\n\\n      "],[1,[28,"i18n",["category.qa_one_to_many"],null],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n\\n  "],[7,"section",true],[10,"class","field"],[8],[0,"\\n    "],[7,"label",true],[8],[0,"\\n      "],[1,[28,"input",null,[["type","checked"],["checkbox",[24,["category","custom_fields","qa_disable_like_on_answers"]]]]],false],[0,"\\n\\n      "],[1,[28,"i18n",["category.qa_disable_like_on_answers"],null],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n\\n  "],[7,"section",true],[10,"class","field"],[8],[0,"\\n    "],[7,"label",true],[8],[0,"\\n      "],[1,[28,"input",null,[["type","checked"],["checkbox",[24,["category","custom_fields","qa_disable_like_on_questions"]]]]],false],[0,"\\n\\n      "],[1,[28,"i18n",["category.qa_disable_like_on_questions"],null],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n\\n  "],[7,"section",true],[10,"class","field"],[8],[0,"\\n    "],[7,"label",true],[8],[0,"\\n      "],[1,[28,"input",null,[["type","checked"],["checkbox",[24,["category","custom_fields","qa_disable_like_on_comments"]]]]],false],[0,"\\n\\n      "],[1,[28,"i18n",["category.qa_disable_like_on_comments"],null],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/category-custom-settings/enable-qa"}}),define("discourse/plugins/discourse-question-answer/discourse/connectors/category-custom-settings/enable-qa",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var t={setupComponent:function(e){e.category.custom_fields||(e.category.custom_fields={})}};e["default"]=t}),Ember.TEMPLATES["javascripts/discourse/connectors/topic-title/qa-tip-container"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["model","qa_enabled"]]],null,{"statements":[[0,"  "],[1,[28,"d-section",null,[["pageClass","scrollTop"],["topic-qa-enabled",false]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[24,["showTip"]]],null,{"statements":[[0,"  "],[1,[28,"qa-topic-tip",null,[["label","details","detailsOpts"],[[24,["label"]],[24,["details"]],[24,["detailsOpts"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/topic-title/qa-tip-container"}}),define("discourse/plugins/discourse-question-answer/discourse/connectors/topic-title/qa-tip-container",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var t={setupComponent:function(e,t){var o=e.model.category&&e.model.category.qa_one_to_many,n=e.model.siteSettings,s=e.model.showQaTip,i=o?"qa_one_to_many":"qa",a="topic.tip.".concat(i,".title"),r="topic.tip.".concat(i,".details"),c={tl1Limit:n.qa_tl1_vote_limit,tl2Limit:n.qa_tl2_vote_limit,tl3Limit:n.qa_tl3_vote_limit,tl4Limit:n.qa_tl4_vote_limit};t.setProperties({showTip:s,label:a,details:r,detailsOpts:c})}};e["default"]=t}),Ember.TEMPLATES["javascripts/discourse/connectors/user-card-post-names/vote-count"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["siteSettings","qa_enabled"]]],null,{"statements":[[0,"  "],[1,[28,"user-vote-count",null,[["voteCount"],[[24,["args","user","vote_count"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/user-card-post-names/vote-count"}}),Ember.TEMPLATES["javascripts/discourse/connectors/user-post-names/vote-count"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["siteSettings","qa_enabled"]]],null,{"statements":[[0,"  "],[1,[28,"user-vote-count",null,[["voteCount"],[[24,["args","model","vote_count"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/user-post-names/vote-count"}}),define("discourse/plugins/discourse-question-answer/discourse/initializers/qa-edits",["exports","discourse/lib/plugin-api","discourse-common/utils/decorators","virtual-dom","discourse/widgets/post","discourse/helpers/node","discourse/models/composer","../lib/qa-utilities","discourse/widgets/actions-summary","discourse/lib/posts-with-placeholders","@ember/runloop"],function(e,t,o,n,s,i,a,r,c,l,u){"use strict";function d(e,t,o,n,s){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce(function(o,n){return n(e,t,o)||o},i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=undefined),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function p(e){function t(e,t){var o=this;if(t)return e=e||[],t.map(function(t){return o.attach("topic-participant",t,{state:{toggled:e.includes(t.username)}})})}var p,m,h,f,_,b,v,g,w,y,q,P,C,k,E,A,T=e.getCurrentUser();e.reopenWidget("post-menu",{menuItems:function(){var e=this.attrs,t=this.siteSettings.post_menu.split("|");if(e.qa_enabled){var o=this.findAncestorModel().topic.category,n=e.firstPost?"questions":e.reply_to_post_number?"comments":"answers";(this.siteSettings.qa_disable_like_on_answers||o&&o["qa_disable_like_on_".concat(n)])&&(t=t.filter(function(e){return"like"!==e})),t=t.filter(function(e){return"reply"!==e})}return t}}),e.decorateWidget("post:before",function(e){var t=[],o=e.getModel(),n=e.widget.model.get("topic.first_answer_id");if(e.attrs.id===n&&o.qa_enabled){var s=e.widget.model.get("topic.answer_count"),i=I18n.t("qa.answer_count",{answerCount:s});t.push(e.h("div.qa-answer-count.small-action",i))}if(o&&1!==o.get("post_number")&&!o.get("reply_to_post_number")&&o.get("qa_enabled")){var a=e.attach("qa-post",{count:o.get("qa_vote_count"),post:o});t.push(a)}return t}),e.decorateWidget("post:after",function(e){var t=e.getModel();if(t.attachCommentToggle&&t.hiddenComments>0){var o=Number(e.widget.siteSettings.qa_comments_default)>0?"more":"all";return e.attach("link",{action:"showComments",actionParam:t.answerId,rawLabel:I18n.t("topic.comment.show_comments.".concat(o),{count:t.hiddenComments}),className:"show-comments"})}}),e.reopenWidget("post-stream",{buildKey:function(){return"post-stream"},defaultState:function(e,t){var o=this._super(e,t);return o.showComments=[],o},showComments:function(e){var t=this.state.showComments;-1===t.indexOf(e)&&(t.push(e),this.state.showComments=t,this.appEvents.trigger("post-stream:refresh",{force:!0}))},html:function(e,t){var o=e.posts||[],n=this.capabilities.isAndroid?o:o.toArray();if(n[0]&&n[0].qa_enabled){var s=null,i=t.showComments,a=Number(this.siteSettings.qa_comments_default),r=0,c=null;n.forEach(function(e,t){e.topic&&(e.oneToMany=e.topic.category.qa_one_to_many,e.reply_to_post_number?(r++,e.comment=!0,e.showComment=i.indexOf(s)>-1||r<=a,e.answerId=s,e.attachCommentToggle=!1,e.showComment&&(c=t),n[t+1]&&n[t+1].reply_to_post_number||e.showComment||(n[c].answerId=s,n[c].attachCommentToggle=!0,n[c].hiddenComments=r-a)):(e.attachCommentToggle=!e.oneToMany,e.topicUserId=e.topic.user_id,s=e.id,r=0,c=t))}),this.capabilities.isAndroid?e.posts=n:e.posts=l["default"].create({posts:n,store:this.store})}return this._super(e,t)}}),e.includePostAttributes("qa_enabled","reply_to_post_number","comment","showComment","answerId","lastComment","last_answerer","last_answered_at","answer_count","last_answer_post_number","last_answerer","topicUserId","oneToMany"),e.addPostClassesCallback(function(e){if(e.qa_enabled&&!e.firstPost){if(e.comment){var t=["comment"];return e.showComment&&t.push("show"),t}return["answer"]}}),e.addPostMenuButton("answer",function(e){if(e.canCreatePost&&e.qa_enabled&&e.firstPost&&(!e.oneToMany||e.topicUserId===T.id)){var t=e.oneToMany?"one_to_many":"answer",o={action:"replyToPost",title:"topic.".concat(t,".help"),icon:"reply",className:"answer create fade-out"};return e.mobileView||(o.label="topic.".concat(t,".title")),o}}),e.addPostMenuButton("comment",function(e){if(e.canCreatePost&&e.qa_enabled){var t={action:"openCommentCompose",title:e.reply_to_post_number?"composer.composer_actions.reply":"topic.comment.help",icon:"comment",className:"comment create fade-out"};return e.mobileView||e.reply_to_post_number||(t.label="topic.comment.title"),t}}),e.modifyClass("controller:composer",(p=(0,o["default"])("model.action","isWhispering","model.privateMessage"),m=(0,o["default"])("model.action","isWhispering","model.editConflict","model.privateMessage"),d(h={saveIcon:function(e,t,o){if(e===a.REPLY&&!t&&!o){var n=this.get("model.post");if(n&&n.get("topic.qa_enabled"))return"comment"}return this._super.apply(this,arguments)},saveLabel:function(e,t,o,n){return t||o||n||e!==a.REPLY||this.get("model.post")||!this.get("topic.qa_enabled")?this._super.apply(this,arguments):"topic.answer.title"}},"saveIcon",[p],(f=(f=Object.getOwnPropertyDescriptor(h,"saveIcon"))?f.value:undefined,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return f}}),h),d(h,"saveLabel",[m],(_=(_=Object.getOwnPropertyDescriptor(h,"saveLabel"))?_.value:undefined,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return _}}),h),h)),e.modifyClass("component:composer-actions",(b=(0,o.on)("didReceiveAttrs"),v=(0,o["default"])("pluginPostSnapshot"),g=(0,o["default"])("isEditing","action","whisper","noBump","isInSlowMode","commenting"),w=(0,o["default"])("options","canWhisper","action","commenting"),d(y={setupPost:function(){var e=this.get("composerModel.post");e&&this.set("pluginPostSnapshot",e)},commenting:function(e){return e&&e.get("topic.qa_enabled")},iconForComposerAction:function(e,t,o,n,s,i){return t!==a.REPLY||o||n||s||e||!i?this._super.apply(this,arguments):"comment"},content:function(e,t,o,n){var s=this,i=this._super.apply(this,arguments);return n&&i.forEach(function(e){"reply_to_topic"===e.id&&(e.name=I18n.t("composer.composer_actions.reply_to_question.label"),e.description=I18n.t("composer.composer_actions.reply_to_question.desc")),"reply_to_post"===e.id&&(e.icon="comment",e.name=I18n.t("composer.composer_actions.comment_on_answer.label",{postUsername:s.get("pluginPostSnapshot.username")}),e.description=I18n.t("composer.composer_actions.comment_on_answer.desc"))}),i}},"setupPost",[b],Object.getOwnPropertyDescriptor(y,"setupPost"),y),d(y,"commenting",[v],Object.getOwnPropertyDescriptor(y,"commenting"),y),d(y,"iconForComposerAction",[g],(q=(q=Object.getOwnPropertyDescriptor(y,"iconForComposerAction"))?q.value:undefined,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return q}}),y),d(y,"content",[w],Object.getOwnPropertyDescriptor(y,"content"),y),y)),e.reopenWidget("post-body",{buildKey:function(e){return"post-body-".concat(e.id)},defaultState:function(e){var t=this._super();return e.qa_enabled&&(t=$.extend({},t,{voters:[]})),t},html:function(e,t){var o=this._super(e,t),s=this.findAncestorModel().actionByName.vote;if(s&&e.qa_enabled){var i=[];if(e.actionsSummary=e.actionsSummary.filter(function(e){return"vote"!==e.action}),s.acted&&s.can_undo&&i.push(this.attach("link",{action:"undoUserVote",rawLabel:I18n.t("post.actions.undo.vote")})),s.count>0&&i.push(this.attach("link",{action:"toggleWhoVoted",rawLabel:"".concat(s.count," ").concat(I18n.t("post.actions.people.vote"))})),i.length){var a=[(0,n.h)("div.vote-links",i)];t.voters.length&&a.push(this.attach("small-user-list",{users:t.voters,listClassName:"voters"}));var r=o.map(function(e){return e&&e.name}).indexOf("actions-summary")+1;o.splice(r-1,0,(0,n.h)("div.vote-container",a))}}return o},undoUserVote:function(){var e=this.findAncestorModel(),t={user_id:this.currentUser.id,post_id:e.id,direction:"up"};(0,r.undoVote)({vote:t}).then(function(t){t.success&&e.set("topic.voted",!1)})},toggleWhoVoted:function(){var e=this.state;if(!e.voters.length)return this.getWhoVoted();e.voters=[]},getWhoVoted:function(){var e=this,t=this.attrs,o=this.state,n={post_id:t.id};(0,r.whoVoted)(n).then(function(t){t.voters&&(o.voters=t.voters.map(c.smallUserAtts),e.scheduleRerender())})}}),e.modifyClass("model:topic",(d(P={showQaTip:function(e){return e&&this.siteSettings.qa_show_topic_tip}},"showQaTip",[(0,o["default"])("qa_enabled")],Object.getOwnPropertyDescriptor(P,"showQaTip"),P),P)),e.modifyClass("component:topic-footer-buttons",(d(C={hideFooterReply:function(){var e=this,t=this.get("topic.qa_enabled");Ember.run.scheduleOnce("afterRender",function(){$(".topic-footer-main-buttons > button.create:not(.answer)",e.element).toggle(!t)})}},"hideFooterReply",[(0,o.on)("didInsertElement"),(0,o.observes)("topic.qa_enabled")],Object.getOwnPropertyDescriptor(C,"hideFooterReply"),C),C)),e.modifyClass("model:post-stream",{prependPost:function(e){var t=this.storePost(e);if(t){var o=this.get("posts"),n=function(){return o.unshiftObject(t)};this.get("topic.qa_enabled")&&2===e.post_number&&1===o[0].post_number&&(n=function(){return o.insertAt(1,t)}),n()}return e},appendPost:function(e){var t=this.storePost(e);if(t){var o=this.get("posts");if(!o.includes(t)){var n=e.get("reply_to_post_number"),s=this.get("topic.qa_enabled"),i=function(){return o.pushObject(t)};if(s&&n){var a=!1;o.some(function(e,s){if(a&&!e.reply_to_post_number)return i=function(){return o.insertAt(s,t)},!0;e.post_number===n&&s<o.length-1&&(a=!0)})}this.get("loadingBelow")?i():this.get("postsWithPlaceholders").appendPost(i)}-1!==t.get("id")&&this.set("lastAppended",t)}return e}}),e.modifyClass("component:topic-progress",(k=(0,o["default"])("postStream.loaded","topic.currentPost","postStream.filteredPostsCount","topic.qa_enabled"),E=(0,o["default"])("progressPosition","topic.last_read_post_id","topic.qa_enabled"),d(A={hideProgress:function(e,t,o,n){return n||!e||!t||!this.site.mobileView&&o<2},showBackButton:function(e,t,o){if(t&&!o){var n=this.get("postStream.stream"),s=n.indexOf(t)||0;return s<n.length-1&&s>e}}},"hideProgress",[k],Object.getOwnPropertyDescriptor(A,"hideProgress"),A),d(A,"showBackButton",[E],Object.getOwnPropertyDescriptor(A,"showBackButton"),A),A)),e.modifyClass("component:topic-navigation",{_performCheckSize:function(){!this.element||this.isDestroying||this.isDestroyed||(this.get("topic.qa_enabled")?this.get("info").setProperties({renderTimeline:!1,renderAdminMenuButton:!0}):this._super.apply(this,arguments))}}),e.reopenWidget("post",{html:function(t){return t.cloaked?"":(t.qa_enabled&&!t.firstPost&&(t.replyToUsername=null,t.reply_to_post_number?e.changeWidgetSetting("post-avatar","size","small"):(t.replyCount=null,e.changeWidgetSetting("post-avatar","size","large"))),this.attach("post-article",t))},openCommentCompose:function(){var t=this;this.sendWidgetAction("showComments",this.attrs.id),this.sendWidgetAction("replyToPost",this.model).then(function(){(0,u.next)(t,function(){var o=e.container.lookup("controller:composer");o.model.post||o.model.set("post",t.model)})})}}),e.reopenWidget("topic-map-summary",{html:function(e,t){return e.qa_enabled?this.qaMap(e,t):this._super(e,t)},qaMap:function(e,o){var a=[];a.push((0,n.h)("li",[(0,n.h)("h4",I18n.t("created_lowercase")),(0,n.h)("div.topic-map-post.created-at",[(0,s.avatarFor)("tiny",{username:e.createdByUsername,template:e.createdByAvatarTemplate,name:e.createdByName}),(0,i.dateNode)(e.topicCreatedAt)])]));var r=e.topicUrl+"/"+e.last_answer_post_number,c=e.oneToMany?"one_to_many":"answer";if(a.push((0,n.h)("li",(0,n.h)("a",{attributes:{href:r}},[(0,n.h)("h4",I18n.t("last_".concat(c,"_lowercase"))),(0,n.h)("div.topic-map-post.last-answer",[(0,s.avatarFor)("tiny",{username:e.last_answerer.username,template:e.last_answerer.avatar_template,name:e.last_answerer.name}),(0,i.dateNode)(e.last_answered_at)])]))),a.push((0,n.h)("li",[(0,i.numberNode)(e.answer_count),(0,n.h)("h4",I18n.t("".concat(c,"_lowercase"),{count:e.answer_count}))])),a.push((0,n.h)("li.secondary",[(0,i.numberNode)(e.topicViews,{className:e.topicViewsHeat}),(0,n.h)("h4",I18n.t("views_lowercase",{count:e.topicViews}))])),a.push((0,n.h)("li.secondary",[(0,i.numberNode)(e.participantCount),(0,n.h)("h4",I18n.t("users_lowercase",{count:e.participantCount}))])),e.topicLikeCount&&a.push((0,n.h)("li.secondary",[(0,i.numberNode)(e.topicLikeCount),(0,n.h)("h4",I18n.t("likes_lowercase",{count:e.topicLikeCount}))])),e.topicLinkLength>0&&a.push((0,n.h)("li.secondary",[(0,i.numberNode)(e.topicLinkLength),(0,n.h)("h4",I18n.t("links_lowercase",{count:e.topicLinkLength}))])),o.collapsed&&e.topicPostsCount>2&&e.participants.length>0){var l=t.call(this,e.userFilters,e.participants.slice(0,3));a.push((0,n.h)("li.avatars",l))}return[(0,n.h)("nav.buttons",this.attach("button",{title:"topic.toggle_information",icon:o.collapsed?"chevron-down":"chevron-up",action:"toggleMap",className:"btn"})),(0,n.h)("ul.clearfix",a)]}}),e.reopenWidget("post-admin-menu",{html:function(){var e=this._super.apply(this,arguments);if(this.attrs.qa_enabled&&this.attrs.comment){var t={label:"qa.set_as_answer",action:"setAsAnswer",className:"popup-menu-button",secondaryAction:"closeAdminMenu"};e.children.push(this.attach("post-admin-menu-button",t))}return e},setAsAnswer:function(){var e=this.findAncestorModel();(0,r.setAsAnswer)(e).then(function(){location.reload()})}})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var m={name:"qa-edits",initialize:function(e){e.lookup("site-settings:main").qa_enabled&&(0,t.withPluginApi)("0.8.12",p)}};e["default"]=m}),define("discourse/plugins/discourse-question-answer/discourse/lib/qa-utilities",["exports","discourse/lib/ajax-error","discourse/lib/ajax"],function(e,t,o){"use strict";function n(e){return(0,o.ajax)("/qa/set_as_answer",{type:"POST",data:{post_id:e.id}})["catch"](t.popupAjaxError)}Object.defineProperty(e,"__esModule",{value:!0}),e.setAsAnswer=n,e.whoVoted=e.voteActionId=e.castVote=e.undoVote=void 0;var s=100;e.voteActionId=s;var i=function(e,n){return(0,o.ajax)("/qa/vote",{type:e,data:n})["catch"](t.popupAjaxError)},a=function(e){return i("DELETE",e)};e.undoVote=a;var r=function(e){return i("POST",e)};e.castVote=r;var c=function(e){return(0,o.ajax)("/qa/voters",{type:"GET",data:e})["catch"](t.popupAjaxError)};e.whoVoted=c}),Ember.TEMPLATES["javascripts/components/qa-topic-tip"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"d-button",null,[["class","action","label","icon"],["btn btn-topic-tip",[28,"action",[[23,0,[]],"toggleDetails"],null],[24,["label"]],"info"]]],false],[0,"\\n\\n"],[4,"if",[[24,["showDetails"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","tip-details"],[8],[0,"\\n    "],[1,[22,"cookedDetails"],false],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/qa-topic-tip"}}),Ember.TEMPLATES["javascripts/components/user-vote-count"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"i18n",["user_vote_count"],[["voteCount"],[[24,["voteCount"]]]]],true],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/user-vote-count"}}),define("discourse/plugins/discourse-question-answer/discourse/widgets/qa-button",["exports","discourse/widgets/widget","discourse-common/lib/icon-library"],function(e,t,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=(0,t.createWidget)("qa-button",{tagName:"button.btn.qa-button",html:function(e){return(0,o.iconNode)("angle-".concat(e.direction))},click:function(){this.sendWidgetAction("vote",this.attrs.direction)}});e["default"]=n}),define("discourse/plugins/discourse-question-answer/discourse/widgets/qa-post",["exports","discourse/widgets/widget","../lib/qa-utilities","virtual-dom"],function(e,t,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var s=(0,t.createWidget)("qa-post",{tagName:"div.qa-post",sendShowLogin:function(){this.register.lookup("route:application").send("showLogin")},html:function(e){return[this.attach("qa-button",{direction:"up"}),(0,n.h)("div.count","".concat(e.count))]},vote:function(e){var t=this.currentUser;if(!t)return this.sendShowLogin();var n=this.attrs.post,s={user_id:t.id,post_id:n.id,direction:e};(0,o.castVote)({vote:s}).then(function(e){e.success&&(n.set("topic.qa_voted",!0),e.qa_can_vote&&n.set("topic.qa_can_vote",e.qa_can_vote),e.qa_votes&&n.set("topic.qa_votes",e.qa_votes))})}});e["default"]=s});
//# sourceMappingURL=/assets/plugins/discourse-question-answer-621979798c011f1c3fd3d783ec151f6e609dd8c26e61fb5c47b9c80414861e90.js.map